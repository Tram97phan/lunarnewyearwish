<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Greeting Message</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #ffeedd;
        }
        .container {
            width: 80%;
            max-width: 400px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .slide {
            display: none;
        }
        .active {
            display: block;
        }
        button {
            padding: 10px 20px;
            background: orange;
            color: white;
            font-weight: bold;
            font-size: 18px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        .radio-options input {
            width: 20px; height: 20px;
        }

        .radio-options {
            text-align: left;
            margin-left: 50px;
        }
        
        .wish-input {
            width: 80%;
            height: 50px;
            border-radius: 10px;
            font-size: 18px;
}
        
    .slide {
        display: none;
    }

    .slide.active {
        display: block;
    }

    </style>
</head>
<body>
    <div class="container">
        <div id="slide1" class="slide active">
            <h2>How are you feeling today?</h2>
            <div class="radio-options">
                <input type="radio" name="feeling" value="Fantastic"> <span>Fantastic</span>
            </div>
            <div class="radio-options">
                <input type="radio" name="feeling" value="Good"> Good
            </div>
            <div class="radio-options">
                <input type="radio" name="feeling" value="Normal"> Normal
            </div>
            <div class="radio-options">
                <input type="radio" name="feeling" value="Kinda bad"> Kinda bad
            </div>
            <button onclick="handleNext()">Send</button>
        </div>
        
         <!-- Consolation Slide -->
        <div id="consolation" class="slide">
            <h2>Are you ok? What's the matter?</h2>
            <input class="reason-input" type="text" id="reason" placeholder="Share your thoughts...">
            <button onclick="nextSlide('slide2')">Next</button>
        </div>

        <!-- Congrats Slide -->
        <div id="congrats" class="slide">
            <h2>Wooh, someone's in a good mood!</h2>
            <button onclick="nextSlide('slide2')">Next</button>
        </div>

        <div id="slide2" class="slide">
            <h2>What did you eat yesterday</h2>
            <input class="eat-input" type="text" id="eat" placeholder="Write here"><br>
            <button onclick="nextSlide('slide3')">Send</button>
        </div>
        
        <div id="slide3" class="slide">
            <h2>Imagine the sceneries below, which one would you feel the most relaxed in?</h2>
            <div class="radio-options">
                <input type="radio" name="scenario" value="A quiet sunset at the beach"> <span>A quiet sunset at the beach</span>
            </div>
            <div class="radio-options">
                <input type="radio" name="scenario" value="A peaceful farm in the countryside"> A peaceful farm in the countryside
            </div>
            <div class="radio-options">
                <input type="radio" name="scenario" value="A heart-warming gathering nearby the fireplace"> A heart-warming gathering nearby the fireplace
            </div>
            <div class="radio-options">
                <input type="radio" name="scenario" value="An exciting theme park with your close friends"> An exciting theme park with your close friends
            </div>
            <button onclick="nextSlide('slide4')">Send</button>
        </div>

        <div id="slide4" class="slide">
            <h2>Five things that make you happy</h2>
            <input class="happy-input" type="text" id="happy" placeholder="List them here"><br>
            <button onclick="nextSlide('slide5')">Send</button>
        </div>

        <div id="slide5" class="slide">
            <h2>Your wish is my command.</h2>
            <img style="width: 50%" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgtBb6_9xgWCcTOcy5rkevevJhNhhh3ekD0KuLML6IFXWXqu7C-yrubBT46aOAhM2qvHbAjcUwLEhtxviTypou_yqbIquoq9f7WiWxGu1QxF1zMIjw85gDhN3Wkp-X_ZvxLc8b42JtEONDC/s800/hanabi_animal.png" alt="Fireworks">
            <p>Tram will send you the small favor soon!</p>
        </div>
    </div>
    
    <script>
        let feeling = "";
        let eat = "";
        let reason = "";
        let scenario = "";

        function handleNext() {
        let selectedValue = document.querySelector('input[name="feeling"]:checked');

        if (!selectedValue) {
            alert("Please select an option before proceeding.");
            return;
        }

        feeling = selectedValue.value;

        if (feeling === "Kinda bad") {
            showSlide("consolation");
        } else if (feeling === "Fantastic") {
            showSlide("congrats");
        } else {
            showSlide("slide2"); // Move to slide2 where the user enters "eat"
        }
    }

        function nextSlide(nextSlideId) {
        let currentSlide = document.querySelector(".slide.active");
        
        if (!currentSlide) {
            console.error("No active slide found.");
            return;
        }

        // If the user is on the consolation slide, capture the reason
        if (nextSlideId === "slide2") {
            reason = document.getElementById("reason").value.trim();  // Capture reason
        }

        if (nextSlideId === "slide3") {
            eat = document.getElementById("eat").value;
            if (eat.trim() === "") {
                alert("Please write what you ate");
                return;
            }
        } 
 

        //scenario, happy 
         if (nextSlideId === "slide4") {
            let selectedValue = document.querySelector('input[name="scenario"]:checked');
            if (!selectedValue) {
            alert("Please select an option before proceeding.");
            return;
        }

        scenario = selectedValue.value;    
        } 

        if (nextSlideId === "slide5") {
            happy = document.getElementById("happy").value;
            if (happy.trim() === "") {
                alert("Please answer the question");
                return;
            }
            sendToGoogleSheets({ feeling, reason, eat, scenario, happy });

       
        } 
  

        // Hide current slide
        currentSlide.classList.remove("active");

        // Show next slide
        document.getElementById(nextSlideId).classList.add("active");
    }

        function showSlide(slideId) {
            document.querySelectorAll(".slide").forEach(slide => {
                slide.classList.remove("active");
            });

            document.getElementById(slideId).classList.add("active");
        }

        function sendToGoogleSheets(data) {
        console.log("Sending data:", data); // Debugging

        const scriptURL = 'https://script.google.com/macros/s/AKfycbyeqIlvrCH5k6aOzaDgoIdNOuxMyZdMDIW-K5e2cNPirZFZUn55PqNXUISAPxLJUjna/exec';
        
        fetch(scriptURL, {
            method: 'POST',
            mode: 'no-cors', // Change from 'no-cors' to 'cors'
            body: JSON.stringify(data),
            headers: { 'Content-Type': 'application/json' }
        })
        .then(response => response.json()) // Convert response to JSON
        .then(data => console.log("Success:", data))
        .catch(error => console.error("Error:", error));
    }


    </script>
</body>
</html>
